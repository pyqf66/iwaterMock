<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>jQuery EasyUI</title>
    <link rel="stylesheet" type="text/css"
          href="/statics/themes/bootstrap/easyui.css">
    <script type="text/javascript" src="/statics/js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="/statics/js/jquery.easyui.min.js"></script>
    <script src="/statics/locale/easyui-lang-zh_CN.js"></script>
</head>
<body>
<div>
    <div class="drinkLabel">
        <label for="name">^_^喝水计划</label>
    </div>
    <div class="DrinkPlan">
        <label for="name">　　　　喝水计划：</label>
        <select
                class="easyui-combobox" type="text" id="DrinkPlan"
                name="DrinkPlan" data-options="editable:false;panelHeight:auto">
            <option value="1">健康计划</option>
            <option value="2">塑身计划</option>
            <option value="3">康复计划</option>
            <option value="4">备孕计划</option>
            <option value="5">孕期计划</option>
            <option value="6">哺乳计划</option>
            <option value="7">结石计划</option>
            <option value="8">自定义喝水计划</option>
        </select>
    </div>
    <div class="Age">
        <label for="name">　　　　　　年龄：</label>
        <input
                class="easyui-validatebox" type="text" id="Age"
                name="Age" style="width:200px">
    </div>
    <div class="Weight">
        <label for="name">　　　　　　体重：</label>
        <input
                class="easyui-validatebox" type="text" id="Weight"
                name="Weight" style="width:200px">
    </div>
    <div class="Sex">
        <label for="name">　　　　　　性别：</label>
        <select
                class="easyui-combobox" type="text" id="Sex"
                name="Sex" data-options="editable:false;panelHeight:auto">
            <option value="0">女</option>
            <option value="1">男</option>
        </select>
    </div>
    <div class="Job">
        <label for="name">　　　　　　职业：</label>
        <select
                class="easyui-validatebox" type="text" id="Job"
                name="Job" style="width:200px">
            <option value="1">学生，或者程序员、编辑、会计等办公职业</option>
            <option value="2">教师、医生、销售等说话多的职业</option>
            <option value="3">司机、快递、厨师等高体力的职业</option>
        </select>
    </div>
    <div class="DistanceDays">
        <label for="name">距离宝宝出生天数：</label>
        <input
                class="easyui-validatebox" type="text" id="DistanceDays"
                name="DistanceDays" style="width:200px">
    </div>
    <div class="BirthDays">
        <label for="name">宝宝已出生的天数：</label>
        <input
                class="easyui-validatebox" type="text" id="BirthDays"
                name="BirthDays" style="width:200px">
    </div>
    <div class="WaterPlan">
        <label for="name">　　自定义喝水量：</label>
        <input
                class="easyui-validatebox" type="text" id="WaterPlan"
                name="WaterPlan" style="width:200px">
    </div>
    <div class="hydratingLabel">
        <label for="name">^_^补水计划</label>
    </div>
    <div class="HydratingPlan">
        <label for="name">　　　　补水计划：</label>
        <select
                class="easyui-combobox" type="text" id="HydratingPlan"
                name="HydratingPlan" data-options="editable:false;panelHeight:auto">
            <option value="0">不使用补水计划</option>
            <option value="1">感冒发烧计划</option>
            <option value="2">急性腹泻计划</option>
            <option value="3">运动补水计划</option>
            <option value="4">自定义补水计划</option>
            <option value="5">极端天气补水计划</option>
        </select>
    </div>
    <div class="DecrementWeight">
        <label for="name">　　　减少的体重：</label>
        <input
                class="easyui-validatebox" type="text" id="DecrementWeight"
                name="DecrementWeight" style="width:200px">
    </div>
    <div class="SportsType">
        <label for="name">　　　　运动类型：</label>
        <select
                class="easyui-combobox" type="text" id="SportsType"
                name="SportsType" data-options="editable:false;panelHeight:auto">
            <option value="1">快走</option>
            <option value="2">慢跑</option>
            <option value="3">跑步</option>
        </select>
    </div>
    <div class="SportsDistance">
        <label for="name">　　　　运动距离：</label>
        <input
                class="easyui-validatebox" type="text" id="SportsDistance"
                name="SportsDistance" style="width:200px">
    </div>
    <div class="Temperature">
        <label for="name">　　　　　　温度：</label>
        <input
                class="easyui-validatebox" type="text" id="Temperature"
                name="Temperature" style="width:200px">
    </div>
    <div class="WaterHydrating">
        <label for="name">　　自定义补水量：</label>
        <input
                class="easyui-validatebox" type="text" id="WaterHydrating"
                name="WaterHydrating" style="width:200px">
    </div>
    <div style="margin-left: 25%;float: left;">
        <a href="#" class="easyui-linkbutton" onclick="convert()">计算</a>
    </div>
    <div class="WeatherWater">
        <label for="name">急端天气水量：</label>
        <input
                class="easyui-validatebox" type="text" id="WeatherWater"
                name="WeatherWater" disabled="disabled" style="width:80px">
    </div>
    <div class="DrinkWater">
        <label for="name">喝水量：</label>
        <input
                class="easyui-validatebox" type="text" id="DrinkWater"
                name="DrinkWater" disabled="disabled" style="width:80px">
    </div>
    <div class="FillingWater">
        <label for="name">补水量：</label>
        <input
                class="easyui-validatebox" type="text" id="FillingWater"
                name="FillingWater" disabled="disabled" style="width:80px">
    </div>
    <div class="TotalWater">
        <label for="name">总饮水量：</label>
        <input
                class="easyui-validatebox" type="text" id="TotalWater"
                name="TotalWater" disabled="disabled" style="width:80px">
    </div>
</div>
<script type="text/javascript">
    //csrf认证生明处理
    $.ajaxSetup({
        data: {
            csrfmiddlewaretoken: '{{ csrf_token }}',
        }

    });

    $.ajax({
        type: 'POST',
        url: '/mockPlatform/tool/getWaterSettings',
        data: {},
        success: function (data) {
            $('#DrinkPlan').val(data.drinkPlan);
            $('#Age').val(data.age);
            $('#Weight').val(data.weight);
            $('#Sex').val(data.sex);
            $('#Job').val(data.job);
            $('#DistanceDays').val(data.distanceDays);
            $('#BirthDays').val(data.birthDays);
            $('#WaterPlan').val(data.waterPlan);
            $('#HydratingPlan').val(data.hydratingPlan);
            $('#DecrementWeight').val(data.decrementWeight);
            $('#SportsType').val(data.sportsType);
            $('#SportsDistance').val(data.sportsDistance);
            $('#Temperature').val(data.temperature);
            $('#WaterHydrating').val(data.waterHydrating);
        },
        error: function () {
            alert("生成失败！");
        }

    })
    function convert() {
        //调试;
        //debugger;
        var drinkLabel = $('#drinkLabel').val();
        var drinkPlan = $('#DrinkPlan').val();
        var age = $('#Age').val();
        var weight = $('#Weight').val();
        var sex = $('#Sex').val();
        var job = $('#Job').val();
        var distanceDays = $('#DistanceDays').val();
        var birthDays = $('#BirthDays').val();
        var waterPlan = $('#WaterPlan').val();
        var hydratingLabel = $('#hydratingLabel').val();
        var hydratingPlan = $('#HydratingPlan').val();
        var decrementWeight = $('#DecrementWeight').val();
        var sportsType = $('#SportsType').val();
        var sportsDistance = $('#SportsDistance').val();
        var temperature = $('#Temperature').val();
        var waterHydrating = $('#WaterHydrating').val();
        $.ajax({
            type: 'POST',
            url: '/mockPlatform/tool/drinkCalc',
            data: {
                'drinkLabel': drinkLabel,
                'drinkPlan': drinkPlan,
                'age': age,
                'weight': weight,
                'sex': sex,
                'job': job,
                'distanceDays': distanceDays,
                'birthDays': birthDays,
                'waterPlan':waterPlan,
                'hydratingLabel': hydratingLabel,
                'hydratingPlan': hydratingPlan,
                'decrementWeight': decrementWeight,
                'sportsType': sportsType,
                'sportsDistance': sportsDistance,
                'temperature': temperature,
                'waterHydrating': waterHydrating
            },
            success: function (data) {
                alert("计算成功！");
                console.log(data);
                console.log(typeof data);
                weatherWater = data.weatherWater;
                console.log(weatherWater);
                drinkWater = data.drinkWater;
                console.log(drinkWater);
                fillingWater = data.fillingWater;
                console.log(fillingWater);
                totalWater = data.totalWater;
                console.log(totalWater);
                document.getElementById("WeatherWater").value = "";
                document.getElementById("WeatherWater").value = weatherWater;
                document.getElementById("DrinkWater").value = "";
                document.getElementById("DrinkWater").value = drinkWater;
                document.getElementById("FillingWater").value = "";
                document.getElementById("FillingWater").value = fillingWater;
                document.getElementById("TotalWater").value = "";
                document.getElementById("TotalWater").value = totalWater;
            },
            error: function () {
                alert("生成失败！");
            }
        });
    }
</script>
</body>
</html>